# 顶级获取VIP电影 - 项目详细信息报告

## 📋 项目概述

**项目名称**: 顶级获取VIP电影 - 防卸载重装激活码保护系统  
**版本**: v2.1.1 / v3.1.0 (服务器端)  
**开发语言**: Python 3.7+  
**GUI框架**: PyQt5  
**架构**: 客户端-服务器架构  
**构建日期**: 2025-07-26 22:36:36  

## 🎯 核心功能

### 1. VIP视频解析系统
- **多平台支持**: 爱奇艺、腾讯视频、优酷、芒果TV、Bilibili等
- **智能解析**: 使用多个高速解析接口，自动选择最佳接口
- **本地播放**: 内置HTML5播放器，无需下载即可观看
- **并行解析**: 使用64线程并发解析，大幅提高解析速度
- **安全模式**: 支持无痕爬取，自动清理痕迹

### 2. 激活码保护系统
- **设备唯一ID**: 通过多种硬件信息生成唯一设备标识
- **多位置存储**: 注册表、用户目录、程序目录多重备份
- **防卸载重装**: 检测设备ID匹配，防止重复使用激活码
- **服务器端验证**: 真正的激活码唯一性验证
- **过期时间管理**: 完整的激活码生命周期管理

### 3. 激活码管理系统
- **封禁系统**: 支持批量封禁和解封激活码
- **过期管理**: 自动检测和处理过期激活码
- **统计监控**: 实时统计激活码使用情况
- **管理员界面**: 图形化管理工具

## 🏗️ 技术架构

### 客户端架构
```
main.py (主程序)
├── utils.py (工具函数)
├── video_crawler.py (视频爬虫)
├── server_client.py (服务器通信)
└── run.py (启动脚本)
```

### 服务器端架构
```
activation_server.py (Flask服务器)
├── activation_db.json (激活数据库)
├── banned_codes.json (封禁列表)
├── gunicorn_conf.py (生产环境配置)
└── uwsgi.ini (部署配置)
```

## 📁 项目文件结构

### 核心文件
- **main.py**: 主程序入口，包含GUI界面和核心逻辑
- **utils.py**: 工具函数库，包含设备ID生成、激活记录管理
- **activation_server.py**: Flask激活服务器，处理激活验证
- **video_crawler.py**: 视频爬虫模块，支持多平台视频解析
- **server_client.py**: 服务器通信客户端

### 配置文件
- **config.json**: 客户端配置文件
- **requirements.txt**: Python依赖包列表
- **gunicorn_conf.py**: Gunicorn生产环境配置
- **uwsgi.ini**: uWSGI部署配置

### 管理工具
- **diagnose_server.py**: 服务器诊断工具
- **fix_activation.py**: 激活系统修复工具
- **build_with_expiry_management.py**: 项目打包脚本
- **test_run.py**: 系统测试脚本

### 批处理文件
- **启动运行.bat**: 程序启动脚本
- **完全卸载应用程序.bat**: 完全卸载工具
- **install_all_deps.bat**: 依赖安装脚本

### 数据文件
- **activation_db.json**: 激活数据库（当前为空）
- **banned_codes.json**: 封禁激活码列表（当前为空）
- **activation_log.txt**: 程序运行日志
- **activation_server.log**: 服务器运行日志

## 🔧 技术特性

### 1. 设备唯一ID生成
通过收集以下硬件信息生成唯一设备ID：
- Windows MachineGuid
- CPU信息（型号、厂商、标识符）
- 主板信息（产品、制造商）
- BIOS信息（厂商、版本）
- 网络MAC地址
- 计算机名和用户名
- Windows安装ID和产品ID
- 硬盘序列号
- 显卡信息
- 系统盘卷标

### 2. 多重安全存储
激活记录存储在多个位置：
- **注册表**: 多个随机命名的注册表项
- **文件系统**: 用户目录下的多个隐藏位置
- **程序目录**: 程序安装目录下的隐藏文件
- **临时目录**: 作为备用存储位置

### 3. 加密保护
- 使用基于激活码的密钥进行XOR加密
- Base64编码存储
- 多层加密保护敏感数据

### 4. 高性能视频解析
- **并行解析**: 64线程并发处理
- **智能选择**: 自动选择最快的解析接口
- **缓存机制**: 减少重复请求
- **超时控制**: 快速失败和重试机制

## 🌐 服务器端功能

### API接口
- `GET /`: 服务器状态信息
- `POST /activate`: 激活激活码
- `GET /check_code`: 查询激活码状态
- `POST /verify`: 验证已激活的激活码
- `GET /stats`: 获取统计信息
- `GET /health`: 健康检查
- `GET /expiry_info`: 查询过期信息

### 管理员接口
- `POST /admin/add_codes`: 添加激活码到池中
- `GET /admin/list_codes`: 查看激活码池
- `POST /admin/clear_codes`: 清空激活码池
- `POST /admin/ban_codes`: 封禁激活码
- `POST /admin/unban_codes`: 解封激活码
- `GET /admin/list_banned_codes`: 查看封禁列表

### 安全特性
- HMAC-SHA256签名验证
- 请求超时控制
- 错误处理和日志记录
- 自动清理过期数据

## 📊 系统要求

### 客户端要求
- **操作系统**: Windows 7/8/10/11
- **Python版本**: 3.7+（推荐3.8+）
- **内存**: 最低512MB，推荐1GB+
- **网络**: 需要互联网连接
- **存储**: 至少100MB可用空间

### 服务器要求
- **操作系统**: Linux/Windows
- **Python版本**: 3.7+
- **内存**: 最低256MB，推荐512MB+
- **网络**: 公网IP或内网访问
- **端口**: 5008（可配置）

## 🔒 安全机制

### 1. 激活码保护
- 设备绑定，防止跨设备使用
- 多重验证，本地+服务器端
- 自毁机制，使用后从池中移除
- 封禁系统，管理员可封禁滥用激活码

### 2. 数据保护
- 多位置备份，防止数据丢失
- 加密存储，保护敏感信息
- 隐藏文件，减少被发现概率
- 权限控制，防止未授权访问

### 3. 反检测机制
- 随机用户代理
- 请求间隔控制
- 代理轮换支持
- 痕迹自动清理

## 📈 性能优化

### 1. 解析速度优化
- 64线程并发解析
- 智能接口选择
- 快速失败机制
- 缓存重用

### 2. 内存优化
- 及时释放资源
- 临时文件清理
- 会话管理
- 垃圾回收

### 3. 网络优化
- 连接池复用
- 超时控制
- 重试机制
- 压缩传输

## 🛠️ 开发工具

### 诊断工具
- **diagnose_server.py**: 全面的服务器诊断
- **simple_diagnose.py**: 简化版诊断工具
- **check_server_status.py**: 服务器状态检查

### 修复工具
- **fix_activation.py**: 激活系统修复
- **fix_activation_db.py**: 数据库修复
- **fix_status_error.py**: 状态错误修复

### 测试工具
- **test_run.py**: 基础功能测试
- **test_activation_security.py**: 安全测试
- **test_ban_system.py**: 封禁系统测试
- **test_expiry_system.py**: 过期系统测试

### 管理工具
- **memory_monitor.py**: 内存监控
- **optimize_server.py**: 服务器优化
- **cleanup_server.py**: 服务器清理

## 📦 部署方案

### 1. 开发环境
```bash
# 安装依赖
pip install -r requirements.txt

# 启动客户端
python run.py

# 启动服务器
python activation_server.py
```

### 2. 生产环境
```bash
# 使用Gunicorn部署
gunicorn -c gunicorn_conf.py activation_server:app

# 或使用uWSGI部署
uwsgi --ini uwsgi.ini
```

### 3. 打包发布
```bash
# 使用打包脚本
python build_with_expiry_management.py
```

## 🔄 版本历史

### v2.1.1 (客户端)
- 完善的激活码保护系统
- 多平台视频解析支持
- 安全模式和痕迹清理
- GUI界面优化

### v3.1.0 (服务器端)
- 激活码过期时间管理
- 服务器端过期状态查询
- 管理员过期状态监控
- 客户端过期提醒控制
- 实时过期时间显示

## 🚀 新功能特性

### 激活码过期时间管理
- **详细时间显示**: 显示激活时间、过期时间、剩余时间
- **智能提醒**: 根据剩余时间设置不同颜色提示
- **自动禁用**: 过期后自动禁用VIP功能
- **管理员监控**: 提供完整的过期状态管理界面

### 高级安全功能
- **反检测技术**: 随机用户代理、请求间隔、代理轮换
- **痕迹清理**: 自动清理临时文件、浏览器缓存
- **多重验证**: 本地+服务器端双重验证
- **设备绑定**: 防止激活码跨设备使用

## 📝 使用说明

### 客户端使用
1. 运行 `启动运行.bat` 或 `python run.py`
2. 输入激活码进行激活
3. 在搜索框中输入视频链接
4. 点击解析播放按钮
5. 在内置播放器中观看视频

### 管理员操作
1. 使用管理员工具查看激活码状态
2. 可以封禁或解封激活码
3. 监控激活码使用情况
4. 管理过期激活码

### 服务器管理
1. 启动激活服务器
2. 配置防火墙开放5008端口
3. 使用诊断工具检查服务器状态
4. 定期备份激活数据库

## ⚠️ 注意事项

### 使用限制
- 激活码与设备绑定，不可跨设备使用
- 需要网络连接进行激活验证
- 过期后VIP功能将被禁用
- 仅供学习和研究使用

### 安全建议
- 定期备份激活数据库
- 使用HTTPS部署服务器
- 设置强密码保护管理员接口
- 监控异常激活行为

### 技术支持
- 查看程序日志文件排查问题
- 使用诊断工具检查系统状态
- 运行修复工具解决常见问题
- 参考README.md获取详细说明

## 📊 项目统计

- **总文件数**: 60+
- **代码行数**: 10,000+
- **支持平台**: 6个主流视频平台
- **解析接口**: 30+个高速接口
- **并发线程**: 64个
- **存储位置**: 10+个安全位置

## 🎉 项目亮点

1. **完整的激活码保护系统**: 防卸载重装，真正的设备绑定
2. **高性能视频解析**: 64线程并发，秒级解析速度
3. **企业级安全机制**: 多重加密，痕迹清理，反检测
4. **完善的管理工具**: 诊断、修复、测试、监控一应俱全
5. **用户友好界面**: 现代化GUI设计，操作简单直观
6. **生产级部署**: 支持Gunicorn、uWSGI等生产环境
7. **详细的日志系统**: 完整的操作记录和错误追踪
8. **跨平台兼容**: 支持Windows 7-11，Python 3.7+

---

**报告生成时间**: 2025-08-24  
**项目状态**: 活跃开发中  
**技术栈**: Python + PyQt5 + Flask + 多线程 + 加密存储